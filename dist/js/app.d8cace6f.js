(function(e){function t(t){for(var r,s,o=t[0],c=t[1],u=t[2],l=0,d=[];l<o.length;l++)s=o[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);h&&h(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var o=n[s];0!==a[o]&&(r=!1)}r&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},s={app:0},a={app:0},i=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-0c11af76":"7e4b3fd1","chunk-16609646":"baf7fde8","chunk-2d0aa255":"dd66b16c","chunk-6eb35bbf":"ec8853f9","chunk-705f53be":"107cb3a7","chunk-8b2132b2":"355e7c77"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-0c11af76":1,"chunk-16609646":1,"chunk-6eb35bbf":1,"chunk-8b2132b2":1};s[e]?t.push(s[e]):0!==s[e]&&n[e]&&t.push(s[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0c11af76":"67fab4db","chunk-16609646":"4c580f25","chunk-2d0aa255":"31d6cfe0","chunk-6eb35bbf":"d24da278","chunk-705f53be":"31d6cfe0","chunk-8b2132b2":"777995b5"}[e]+".css",a=c.p+r,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var u=i[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===a))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){u=d[o],l=u.getAttribute("data-href");if(l===r||l===a)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var r=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete s[e],h.parentNode.removeChild(h),n(i)},h.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){s[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(h);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",d.name="ChunkLoadError",d.type=r,d.request=s,n[1](d)}a[e]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var h=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"087b":function(e,t,n){},"181e":function(e,t,n){"use strict";n("bb2d")},"1ae0":function(e,t,n){"use strict";var r=n("c973").default,s=n("970b").default,a=n("5bc3").default;n("96cf"),n("d3b7"),n("99af"),n("e9c4"),n("159b"),n("d81d");var i=n("ad5c"),o=i.UserEntity,c=i.TodoEntity,u=function(){function e(t){s(this,e),this.loc=t,this.session="",this.currUserId=0,this.currPassword="",this.currNickname=""}return a(e,[{key:"Login",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.loc,"/login?userId=").concat(t,"&password=").concat(n),{method:"POST"});case 3:return r=e.sent,e.next=6,r.json();case 6:if(s=e.sent,200!==s.status){e.next=13;break}this.session=s.data,this.currPassword=n,this.currUserId=t,e.next=14;break;case 13:throw new Error(s.msg);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e["catch"](0),new Error("Network Error!");case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"Register",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.loc,"/register"),{body:JSON.stringify({nickname:t,password:n}),headers:{"content-type":"application/json;charset=utf-8"},method:"POST"});case 2:return r=e.sent,this.currPassword=n,this.currNickname=t,e.next=7,r.json();case 7:if(s=e.sent,200!==s.status){e.next=12;break}return e.abrupt("return",new o(s.data));case 12:throw new Error(s.msg);case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"GetTodoListWithPage",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n){var r,s,a,i,o,u,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:this.currUserId,e.next=3,fetch("".concat(this.loc,"/api/todo/").concat(r,"?limid=").concat(t,"&max_id=").concat(n),{method:"GET",headers:{Authorization:this.session}});case 3:return s=e.sent,e.next=6,s.status;case 6:return a=e.sent,e.next=9,s.json();case 9:if(i=e.sent,200!==i.status||200!==a){e.next=18;break}return o=JSON.parse(i.data),u=[],o.forEach((function(e){e.completeAt*=1e3,e.createAt*=1e3,e.deadline*=1e3,e.updateAt*=1e3})),o.forEach((function(e){return u.push(new c(e))})),e.abrupt("return",u);case 18:if(null==i){e.next=29;break}if(403!==i.status){e.next=26;break}return e.next=22,this.Login(this.currUserId,this.currPassword);case 22:return e.next=24,this.GetTodoListWithPage(t,n,r);case 24:e.next=27;break;case 26:throw new Error(i.msg);case 27:e.next=30;break;case 29:throw new Error("Network Error");case 30:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"GetTodoList",value:function(){var e=r(regeneratorRuntime.mark((function e(){var t,n,r,s,a,i,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:this.currUserId,e.next=3,fetch("".concat(this.loc,"/api/todo/").concat(t),{method:"GET",headers:{Authorization:this.session}});case 3:return n=e.sent,e.next=6,n.status;case 6:return r=e.sent,e.next=9,n.json();case 9:if(s=e.sent,200!==s.status||200!==r){e.next=18;break}return a=s.data,i=[],a.forEach((function(e){e.completeAt*=1e3,e.createAt*=1e3,e.deadline*=1e3,e.updateAt*=1e3})),a.forEach((function(e){return i.push(new c(e))})),e.abrupt("return",i);case 18:if(null==s){e.next=29;break}if(403!==s.status){e.next=26;break}return e.next=22,this.Login(this.currUserId,this.currPassword);case 22:return e.next=24,this.GetTodoList(t);case 24:e.next=27;break;case 26:throw new Error(s.msg);case 27:e.next=30;break;case 29:throw new Error("Network Error");case 30:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"FetchTODOList",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r,s,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:this.currUserId,e.next=3,fetch("".concat(this.loc,"/api/todo/").concat(n),{method:"POST",headers:{Authorization:this.session,"content-type":"application/json;charset=utf-8"},body:JSON.stringify(t.map((function(e){return e.parseJson()})))});case 3:return r=e.sent,e.next=6,r.status;case 6:return s=e.sent,e.next=9,r.json();case 9:if(a=e.sent,200!==a.status||200!==s){e.next=13;break}e.next=25;break;case 13:if(null==a){e.next=24;break}if(403!==a.status){e.next=21;break}return e.next=17,this.Login(this.currUserId,this.currPassword);case 17:return e.next=19,this.FetchTODOList(t,n);case 19:e.next=22;break;case 21:throw new Error(a.msg);case 22:e.next=25;break;case 24:throw new Error("Network Error");case 25:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"CreateTODO",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r,s,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:this.currUserId,e.next=3,fetch("".concat(this.loc,"/api/todo/").concat(n,"/new"),{method:"POST",headers:{Authorization:this.session,"content-type":"application/json;charset=utf-8"},body:JSON.stringify(t.parseJson())});case 3:return r=e.sent,e.next=6,r.status;case 6:return s=e.sent,e.next=9,r.json();case 9:if(a=e.sent,200!==a.status||200!==s){e.next=18;break}return a.data.completeAt*=1e3,a.data.createAt*=1e3,a.data.deadline*=1e3,a.data.updateAt*=1e3,e.abrupt("return",new c(a.data));case 18:if(null==a){e.next=29;break}if(403!==a.status){e.next=26;break}return e.next=22,this.Login(this.currUserId,this.currPassword);case 22:return e.next=24,this.CreateTODO(t,n);case 24:e.next=27;break;case 26:throw new Error(a.msg);case 27:e.next=30;break;case 29:throw new Error("Network Error");case 30:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"GetTODO",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r,s,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:this.currUserId,e.next=3,fetch("".concat(this.loc,"/api/todo/").concat(n,"/").concat(t),{method:"GET",headers:{Authorization:this.session}});case 3:return r=e.sent,e.next=6,r.status;case 6:return s=e.sent,e.next=9,r.json();case 9:if(a=e.sent,200!==a.status||200!==s){e.next=18;break}return a.data.completeAt*=1e3,a.data.createAt*=1e3,a.data.deadline*=1e3,a.data.updateAt*=1e3,e.abrupt("return",new c(a.data));case 18:if(null==a){e.next=29;break}if(403!==a.status){e.next=26;break}return e.next=22,this.Login(this.currUserId,this.currPassword);case 22:return e.next=24,this.GetTODO(t,n);case 24:e.next=27;break;case 26:throw new Error(a.msg);case 27:e.next=30;break;case 29:throw new Error("Network Error");case 30:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"UpdateTODO",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r,s,a,i,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:-1,r=o.length>2&&void 0!==o[2]?o[2]:this.currUserId,-1===n&&(n=t.todoId),console.log("UpdateTODO",t),e.next=6,fetch("".concat(this.loc,"/api/todo/").concat(r,"/").concat(n),{method:"PUT",headers:{Authorization:this.session,"content-type":"application/json;charset=utf-8"},body:JSON.stringify(t.parseJson())});case 6:return s=e.sent,e.next=9,s.status;case 9:return a=e.sent,e.next=12,s.json();case 12:if(i=e.sent,200!==i.status||200!==a){e.next=16;break}e.next=28;break;case 16:if(null==i){e.next=27;break}if(403!==i.status){e.next=24;break}return e.next=20,this.Login(this.currUserId,this.currPassword);case 20:return e.next=22,this.UpdateTODO(t,n,r);case 22:e.next=25;break;case 24:throw new Error(i.msg);case 25:e.next=28;break;case 27:throw new Error("Network Error");case 28:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"DeleteTODO",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r,s,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:this.currUserId,e.next=3,fetch("".concat(this.loc,"/api/todo/").concat(n,"/").concat(t),{method:"DELETE",headers:{Authorization:this.session,"content-type":"application/json;charset=utf-8"},body:JSON.stringify({todoId:t,creatorId:n})});case 3:return r=e.sent,e.next=6,r.status;case 6:return s=e.sent,e.next=9,r.json();case 9:if(a=e.sent,200!==a.status||200!==s){e.next=13;break}e.next=25;break;case 13:if(null==a){e.next=24;break}if(403!==a.status){e.next=21;break}return e.next=17,this.Login(this.currUserId,this.currPassword);case 17:return e.next=19,this.DeleteTODO(t,n);case 19:e.next=22;break;case 21:throw new Error(a.msg);case 22:e.next=25;break;case 24:throw new Error("Network Error");case 25:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"SearchByNickname",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.loc,"/api/user/search?nickname=").concat(t),{method:"GET",headers:{Authorization:this.session}});case 2:return n=e.sent,e.next=5,n.status;case 5:return r=e.sent,e.next=8,n.json();case 8:if(s=e.sent,200!==s.status||200!==r){e.next=13;break}return e.abrupt("return",s.data);case 13:if(null==s){e.next=24;break}if(403!==s.status){e.next=21;break}return e.next=17,this.Login(this.currUserId,this.currPassword);case 17:return e.next=19,this.SearchByNickname(t);case 19:e.next=22;break;case 21:throw new Error(s.msg);case 22:e.next=25;break;case 24:throw new Error("Network Error");case 25:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"GetPublishedInfo",value:function(){var e=r(regeneratorRuntime.mark((function e(){var t,n,r,s,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:this.currUserId,e.next=3,fetch("".concat(this.loc,"/api/user/").concat(t),{method:"GET",headers:{Authorization:this.session}});case 3:return n=e.sent,e.next=6,n.status;case 6:return r=e.sent,e.next=9,n.json();case 9:if(s=e.sent,200!==s.status||200!==r){e.next=14;break}return e.abrupt("return",s.data);case 14:if(null==s){e.next=25;break}if(403!==s.status){e.next=22;break}return e.next=18,this.Login(this.currUserId,this.currPassword);case 18:return e.next=20,this.GetPublishedInfo(t);case 20:e.next=23;break;case 22:throw new Error(s.msg);case 23:e.next=26;break;case 25:throw new Error("Network Error");case 26:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"GetAvatar",value:function(){var e=r(regeneratorRuntime.mark((function e(){var t,n,r,s,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:this.currUserId,e.next=3,fetch("".concat(this.loc,"/api/user/").concat(t,"/avatar"),{method:"GET",headers:{Authorization:this.session}});case 3:return n=e.sent,e.next=6,n.status;case 6:if(r=e.sent,200!==r){e.next=14;break}return e.next=10,n.blob();case 10:return s=e.sent,e.abrupt("return",s);case 14:if(403!==r){e.next=22;break}return e.next=17,this.Login(this.currUserId,this.currPassword);case 17:return e.next=19,this.GetAvatar(t);case 19:return e.abrupt("return",e.sent);case 22:throw new Error("Network Error");case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"UpdateAvatar",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r,s,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:this.currUserId,e.next=3,fetch("".concat(this.loc,"/api/user/").concat(n,"/avatar"),{method:"POST",headers:{Authorization:this.session,"content-type":"image/jpeg"},body:t});case 3:return r=e.sent,e.next=6,r.status;case 6:return s=e.sent,e.next=9,r.json();case 9:if(a=e.sent,200!==a.status||200!==s){e.next=13;break}e.next=25;break;case 13:if(null==a){e.next=24;break}if(403!==a.status){e.next=21;break}return e.next=17,this.Login(this.currUserId,this.currPassword);case 17:return e.next=19,this.UpdateAvatar(t,n);case 19:e.next=22;break;case 21:throw new Error(a.msg);case 22:e.next=25;break;case 24:throw new Error("Network Error");case 25:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"QueryDetailInfo",value:function(){var e=r(regeneratorRuntime.mark((function e(){var t,n,r,s,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:this.currUserId,e.next=3,fetch("".concat(this.loc,"/api/user/").concat(t,"/detail"),{method:"GET",headers:{Authorization:this.session}});case 3:return n=e.sent,e.next=6,n.status;case 6:return r=e.sent,e.next=9,n.json();case 9:if(s=e.sent,200!==s.status||200!==r){e.next=14;break}return e.abrupt("return",new o(s.data));case 14:if(null==s){e.next=25;break}if(403!==s.status){e.next=22;break}return e.next=18,this.Login(this.currUserId,this.currPassword);case 18:return e.next=20,this.QueryDetailInfo(t);case 20:e.next=23;break;case 22:throw new Error(s.msg);case 23:e.next=26;break;case 25:throw new Error("Network Error");case 26:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"UpdateDetailInfo",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r,s,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:this.currUserId,t.userId=n,void 0!==t.password&&(this.currPassword=t.password),e.next=5,fetch("".concat(this.loc,"/api/user/").concat(n,"/detail"),{method:"POST",headers:{Authorization:this.session,"content-type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 5:return r=e.sent,e.next=8,r.status;case 8:return s=e.sent,e.next=11,r.json();case 11:if(a=e.sent,200!==a.status||200!==s){e.next=15;break}e.next=27;break;case 15:if(null==a){e.next=26;break}if(403!==a.status){e.next=23;break}return e.next=19,this.Login(this.currUserId,this.currPassword);case 19:return e.next=21,this.UpdateDetailInfo(t,n);case 21:e.next=24;break;case 23:throw new Error(a.msg);case 24:e.next=27;break;case 26:throw new Error("Network Error");case 27:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"GetWatchList",value:function(){var e=r(regeneratorRuntime.mark((function e(){var t,n,r,s,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:this.currUserId,e.next=3,fetch("".concat(this.loc,"/api/user/").concat(t,"/watchlist"),{method:"GET",headers:{Authorization:this.session}});case 3:return n=e.sent,e.next=6,n.status;case 6:return r=e.sent,e.next=9,n.json();case 9:if(s=e.sent,200!==s.status||200!==r){e.next=14;break}return e.abrupt("return",s.data);case 14:if(null==s){e.next=25;break}if(403!==s.status){e.next=22;break}return e.next=18,this.Login(this.currUserId,this.currPassword);case 18:return e.next=20,this.GetWatchList(t);case 20:e.next=23;break;case 22:throw new Error(s.msg);case 23:e.next=26;break;case 25:throw new Error("Network Error");case 26:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"AddWatchList",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r,s,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:this.currUserId,console.log(t),console.log(JSON.stringify(t)),e.next=5,fetch("".concat(this.loc,"/api/user/").concat(n,"/watchlist"),{method:"POST",headers:{Authorization:this.session,"content-type":"application/json;charset=utf-8"},body:JSON.stringify({watchList:t})});case 5:return r=e.sent,e.next=8,r.status;case 8:return s=e.sent,e.next=11,r.json();case 11:if(a=e.sent,200!==a.status||200!==s){e.next=15;break}e.next=27;break;case 15:if(null==a){e.next=26;break}if(403!==a.status){e.next=23;break}return e.next=19,this.Login(this.currUserId,this.currPassword);case 19:return e.next=21,this.AddWatchList(t,n);case 21:e.next=24;break;case 23:throw new Error(a.msg);case 24:e.next=27;break;case 26:throw new Error("Network Error");case 27:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"DeleteWatchList",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r,s,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:this.currUserId,e.next=3,fetch("".concat(this.loc,"/api/user/").concat(n,"/watchlist"),{method:"DELETE",headers:{Authorization:this.session,"content-type":"application/json;charset=utf-8"},body:JSON.stringify({watchList:t})});case 3:return r=e.sent,e.next=6,r.status;case 6:return s=e.sent,e.next=9,r.json();case 9:if(a=e.sent,200!==a.status||200!==s){e.next=13;break}e.next=25;break;case 13:if(null==a){e.next=24;break}if(403!==a.status){e.next=21;break}return e.next=17,this.Login(this.currUserId,this.currPassword);case 17:return e.next=19,this.DeleteWatchList(t,n);case 19:e.next=22;break;case 21:throw new Error(a.msg);case 22:e.next=25;break;case 24:throw new Error("Network Error");case 25:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e("http://sgp.hareru.moe:8080")),e.instance}}]),e}();e.exports=u},"2dd4":function(e,t,n){"use strict";n("7059")},"2eb0":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],i=(n("5c0b"),n("2877")),o={},c=Object(i["a"])(o,s,a,!1,null,null,null),u=c.exports,l=n("9483");Object(l["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("d3b7"),n("3ca3"),n("ddb0");var d=n("8c4f"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("el-container",[n("el-aside",{attrs:{width:e.asideWidth}},[n("aside-component")],1),n("el-container",[n("el-header",[n("header-component")],1),n("el-main",[n("router-view")],1)],1)],1)],1)},f=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{collapse:e.isCollapse,"default-active":e.activeMenu}},[n("h3",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapse,expression:"!isCollapse"}]},[e._v("菜单栏")]),n("h3",{directives:[{name:"show",rawName:"v-show",value:e.isCollapse,expression:"isCollapse"}]},[e._v("菜单")]),e._l(e.menus,(function(t,r){return n("el-menu-item",{key:r,attrs:{index:r.toString()},on:{click:function(n){return e.itemClick(t)}}},[n("i",{class:"el-icon-"+t.icon}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.label))])])}))],2)},m=[],w=(n("b0c0"),{data:function(){return{menus:[{label:"未完成事项",name:"undone",icon:"notebook-2",path:"/undone"},{label:"已完成事项",name:"done",icon:"finished",path:"/done"},{label:"种树",name:"plating",icon:"timer",path:"/plating"},{label:"个人中心",name:"user",icon:"user",path:"/user"}]}},methods:{itemClick:function(e){this.$route.name!==e.name&&this.$router.push({name:e.name})}},computed:{isCollapse:function(){return this.$store.state.asideCollapse.isCollapse},activeMenu:function(){var e=this.$route;return e.path}}}),g=w,b=(n("2dd4"),Object(i["a"])(g,p,m,!1,null,"42df74e2",null)),k=b.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("div",{staticClass:"left-header"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-menu",plain:"",circle:"",size:"small"},on:{click:function(t){return e.collapseMenu()}}})],1),n("div",{staticClass:"right-header"},[n("el-dropdown",{attrs:{size:"small"}},[n("el-button",{attrs:{icon:"el-icon-user",size:"small",circle:""}}),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[n("span",{on:{click:function(t){return e.goToMainUser()}}},[e._v("个人中心")])]),n("el-dropdown-item",[n("span",{on:{click:function(t){return e.userExit()}}},[e._v("退出登录")])])],1)],1)],1)])},v=[],y={data:function(){return{}},methods:{collapseMenu:function(){this.$store.commit("collapseMenu")},goToMainUser:function(){"user"!==this.$route.name&&this.$router.push({name:"user"})},userExit:function(){this.$router.push({path:"/"})}}},I=y,E=(n("ea0c"),Object(i["a"])(I,x,v,!1,null,"a87b8fc4",null)),T=E.exports,L={name:"Home",components:{AsideComponent:k,HeaderComponent:T},computed:{asideWidth:function(){return this.$store.state.asideCollapse.isCollapse?"60px":"200px"}}},A=L,P=(n("181e"),Object(i["a"])(A,h,f,!1,null,"83599d82",null)),O=P.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("el-row",{attrs:{type:"flex",align:"middle",justify:"center"}},[n("el-col",{attrs:{span:24}},[n("el-card",{staticStyle:{width:"400px",float:"middle"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("h2",[e._v("欢迎使用DanDelion TODO")])]),n("div",[n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:8}},[n("span",[e._v("用户ID")])]),n("el-col",{attrs:{span:16}},[n("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"请输入用户ID"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}})],1)],1),n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:8}},[n("span",[e._v("密码")])]),n("el-col",{attrs:{span:16}},[n("el-input",{attrs:{"prefix-icon":"el-icon-key",placeholder:"请输入密码","show-password":""},model:{value:e.userPassword,callback:function(t){e.userPassword=t},expression:"userPassword"}})],1)],1),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.btnLoginClick()}}},[e._v(" 登录 ")])],1),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){e.registerDialogVisible=!0}}},[e._v(" 注册 ")]),n("el-dialog",{attrs:{title:"用户注册",visible:e.registerDialogVisible,width:e.registerDialogWidth},on:{"update:visible":function(t){e.registerDialogVisible=t}}},[n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:8}},[n("span",[e._v("昵称")])]),n("el-col",{attrs:{span:16}},[n("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"请输入昵称"},model:{value:e.registerNickname,callback:function(t){e.registerNickname=t},expression:"registerNickname"}})],1)],1),n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:8}},[n("span",[e._v("密码")])]),n("el-col",{attrs:{span:16}},[n("el-input",{attrs:{"prefix-icon":"el-icon-key",placeholder:"请输入密码","show-password":""},model:{value:e.registerPassword,callback:function(t){e.registerPassword=t},expression:"registerPassword"}})],1)],1),n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:8}},[n("span",[e._v("确认密码")])]),n("el-col",{attrs:{span:16}},[n("el-input",{attrs:{"prefix-icon":"el-icon-key",placeholder:"请再次输入密码","show-password":""},model:{value:e.registerConfirmedPassword,callback:function(t){e.registerConfirmedPassword=t},expression:"registerConfirmedPassword"}})],1)],1),n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{type:"text",round:""},on:{click:function(t){e.registerDialogVisible=!1}}},[e._v(" 取消 ")])],1),n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.btnRegisterClick()}}},[e._v(" 确定 ")])],1)],1)],1)],1)],1)],1)])],1)],1)],1)},D=[],j=(n("159b"),n("1ae0")),N=n.n(j),S={data:function(){return{registerDialogVisible:!1,userId:null,userPassword:null,registerNickname:null,registerPassword:null,registerConfirmedPassword:null}},methods:{btnLoginClick:function(){var e=this;if(this.userId)if(this.userPassword){var t=N.a.getInstance();t.Login(this.userId,this.userPassword).then((function(){t.QueryDetailInfo(e.userId).then((function(t){e.$store.commit("setId",t.userId),e.$store.commit("setNickname",t.nickname),e.$store.commit("setRole",t.role),e.$store.commit("setPassword",e.userPassword)})).catch((function(t){console.log(t),e.$message({message:"获取用户信息失败",iconClass:"el-icon-warning-outline",duration:1500,center:!0})})),t.GetTodoList(e.userId).then((function(t){e.$store.commit("setTodoCount",t.length);for(var n=0;n<t.length;n++)0===t[n].completeAt.GetTime().getTime()?e.$store.commit("addUndoneEntity",t[n]):e.$store.commit("addDoneEntity",t[n])})).catch((function(t){console.log(t),e.$message({message:"获取用户TodoList失败",iconClass:"el-icon-warning-outline",duration:1500,center:!0})})),t.GetWatchList(e.userId).then((function(n){n.forEach((function(n){t.GetPublishedInfo(n).then((function(t){e.$store.commit("addWatched",t)})).catch((function(e){console.log(e)}))}))})).catch((function(t){console.log(t),e.$message({message:t,iconClass:"el-icon-warning-outline",duration:1500,center:!0})})),t.GetAvatar(e.userId).then((function(t){console.log("avatar",t),e.$store.commit("setAvatar",t)})).catch((function(e){console.log(e)})),e.$router.push({name:"undone"})})).catch((function(t){console.log(t),e.$message({message:"登录失败，请检查用户ID与密码是否正确",iconClass:"el-icon-warning-outline",duration:1500,center:!0}),e.userId=null,e.userPassword=null}))}else this.$message({message:"用户密码不能为空",iconClass:"el-icon-warning-outline",duration:1500,center:!0});else this.$message({message:"用户ID不能为空",iconClass:"el-icon-warning-outline",duration:1500,center:!0})},btnRegisterClick:function(){var e=this;if(this.registerNickname)if(this.registerPassword)if(this.registerConfirmedPassword)if(this.registerPassword!==this.registerConfirmedPassword)this.$message({message:"两次输入的密码不同",iconClass:"el-icon-warning-outline",duration:1500,center:!0});else{var t=N.a.getInstance();t.Register(this.registerNickname,this.registerPassword).then((function(t){var n=t.userId;e.$message({message:"注册成功，您的用户ID是"+n,iconClass:"el-icon-warning-outline",duration:1500,center:!0}),e.userId=n,e.registerDialogVisible=!1})).catch((function(t){e.$message({message:t,iconClass:"el-icon-warning-outline",duration:1500,center:!0})}))}else this.$message({message:"确认密码不能为空",iconClass:"el-icon-warning-outline",duration:1500,center:!0});else this.$message({message:"密码不能为空",iconClass:"el-icon-warning-outline",duration:1500,center:!0});else this.$message({message:"用户昵称不能为空",iconClass:"el-icon-warning-outline",duration:1500,center:!0})},btnRegisterCancel:function(){this.registerDialogVisible=!1,this.registerNickname=null,this.registerPassword=null,this.registerConfirmedPassword=null}},computed:{registerDialogWidth:function(){var e=document.body.clientWidth;return e<500?"80%":"400px"}}},U=S,R=(n("f87d"),Object(i["a"])(U,C,D,!1,null,"49e08f6c",null)),$=R.exports;r["default"].use(d["a"]);var _=[{path:"/",name:"Login",component:$},{path:"/home",name:"Home",component:O,children:[{path:"/undone",name:"undone",component:function(){return n.e("chunk-6eb35bbf").then(n.bind(null,"0f08"))}},{path:"/done",name:"done",component:function(){return n.e("chunk-16609646").then(n.bind(null,"d388"))}},{path:"/record",name:"record",component:function(){return n.e("chunk-2d0aa255").then(n.bind(null,"1088"))}},{path:"/user",name:"user",component:function(){return n.e("chunk-8b2132b2").then(n.bind(null,"7639"))}},{path:"/setting",name:"setting",component:function(){return n.e("chunk-705f53be").then(n.bind(null,"2848"))}},{path:"/plating",name:"plating",component:function(){return n.e("chunk-0c11af76").then(n.bind(null,"e746"))}}]}],G=new d["a"]({mode:"history",base:"/",routes:_}),J=G,z=n("2f62"),W={state:{isCollapse:!0},mutations:{collapseMenu:function(e){e.isCollapse=!e.isCollapse}}},M=(n("a434"),{state:{doneList:[]},mutations:{emptyDoneList:function(e){e.doneList=[]},addDoneEntity:function(e,t){e.doneList.push(t)},removeDoneEntity:function(e,t){for(var n=0;n<e.doneList.length;n++)e.doneList[n].todoId===t.todoId&&(e.doneList.splice(n,1),n--)}}}),V={state:{todoList:[]},mutations:{emptyTodoList:function(e){e.todoList=[]},addUndoneEntity:function(e,t){e.todoList.push(t)},removeUndoneEntity:function(e,t){for(var n=0;n<e.todoList.length;n++)e.todoList[n].todoId===t.todoId&&(e.todoList.splice(n,1),n--)}}},B={state:{userInfo:{id:null,nickname:null,role:null,password:null},todoCount:null,Avatar:null},mutations:{setId:function(e,t){e.userInfo.id=t},setNickname:function(e,t){e.userInfo.nickname=t},setRole:function(e,t){e.userInfo.role=t},setPassword:function(e,t){e.userInfo.password=t},changeNickname:function(e,t){e.userInfo.nickname=t},setTodoCount:function(e,t){e.todoCount=t},setAvatar:function(e,t){e.Avatar=t},addTodoCount:function(e){e.todoCount++}}},F={state:{watchList:[]},mutations:{getWatchList:function(e,t){e.watchList=t},addWatched:function(e,t){for(var n=!1,r=0;r<e.watchList.length;r++)if(e.watchList[r]===t){n=!0;break}!1===n&&e.watchList.push(t)},removeWatched:function(e,t){for(var n=0;n<e.watchList.length;n++)e.watchList[n]===t&&(e.watchList.splice(n,1),n--)}}},H={state:{value:"",totalTime:0,currentTime:0,progressStatus:null},mutations:{setValue:function(e,t){e.value=t},setTotalTime:function(e,t){e.totalTime=t},setCurrentTime:function(e,t){e.currentTime=t},setProgressStatus:function(e,t){e.progressStatus=t}}};r["default"].use(z["a"]);var q=new z["a"].Store({state:{},mutations:{},actions:{},modules:{asideCollapse:W,doneRepository:M,undoneRepository:V,userInfo:B,watchList:F,timerInfo:H}}),Q=n("5c96"),K=n.n(Q);n("0fae");r["default"].config.productionTip=!1,r["default"].use(K.a),new r["default"]({router:J,store:q,render:function(e){return e(u)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},7059:function(e,t,n){},"9c0c":function(e,t,n){},ad5c:function(e,t,n){var r=n("970b").default,s=n("5bc3").default;n("a4d3"),n("e01a");var a=function(){"use strict";function e(t){r(this,e),t instanceof Date?this.timeDateObj=t:"number"===typeof t&&(this.timeDateObj=new Date(t))}return s(e,[{key:"GetTimeStampJson",value:function(){return parseInt(this.timeDateObj.getTime()/1e3)}},{key:"GetTime",value:function(){return this.timeDateObj}},{key:"SetTime",value:function(e){e instanceof Date?this.timeDateObj=e:"number"===typeof e&&(this.timeDateObj=new Date(e))}}]),e}(),i=function(){"use strict";function e(t){r(this,e),this.completeAt=new a(void 0===t.completeAt?0:t.completeAt),this.createAt=new a(void 0===t.createAt?Date():t.createAt),this.creatorId=t.creatorId,this.deadline=new a(void 0===t.deadline?0:t.deadline),t.description?this.description=t.description:this.description="",this.importance=t.importance,this.localId=t.localId,this.parentId=t.parentId,this.plantTime=new a(void 0===t.plantTime?0:t.plantTime),this.title=t.title,this.todoId=t.todoId,this.updateAt=new a(void 0===t.updateAt?0:t.updateAt)}return s(e,[{key:"completeTodo",value:function(){this.completeAt.SetTime(new Date),this.updateAt.SetTime(new Date)}},{key:"updateTodo",value:function(){this.updateAt.SetTime(new Date)}},{key:"plantForTime",value:function(e){"number"===typeof e&&(this.plantTime+=e,this.updateAt.SetTime(new Date))}},{key:"updateDeadline",value:function(e){e instanceof Date&&(this.deadline.SetTime(e),this.updateAt.SetTime(new Date))}},{key:"parseJson",value:function(){return{completeAt:this.completeAt.GetTimeStampJson(),createAt:this.createAt.GetTimeStampJson(),creatorId:this.creatorId,deadline:this.deadline.GetTimeStampJson(),importance:this.importance,description:this.description,localId:this.localId,parentId:this.parentId,plantTime:this.plantTime.GetTimeStampJson(),title:this.title,todoId:this.todoId,updateAt:this.updateAt.GetTimeStampJson()}}}]),e}(),o=function(){"use strict";function e(t){r(this,e),this.nickname=t.nickname,this.password=t.password,this.role=t.role,this.userId=t.userId,this.watchList=t.watchList}return s(e,[{key:"parseJson",value:function(){return{nickname:this.nickname,password:this.password,userId:this.userId}}}]),e}();e.exports={TimeStamp:a,TodoEntity:i,UserEntity:o}},bb2d:function(e,t,n){},ea0c:function(e,t,n){"use strict";n("087b")},f87d:function(e,t,n){"use strict";n("2eb0")}});
//# sourceMappingURL=app.d8cace6f.js.map